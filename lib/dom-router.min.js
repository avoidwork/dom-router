/*
 2014 Jason Mulligan
 @version 1.0.0
 */
!function(a,b){"use strict";function c(a,b){return a.indexOf(b)>-1}function d(a){this.hash=a.hash,this.element=a.element}function e(a){return new d(a)}function Router(){this.active=!0,this.callback=null,this.css={active:"active",hidden:"hidden"},this.ctx=null,this["default"]=null,this.history=[],this.log=!1,this.routes=[],this.select=null,this.stop=!0}function f(d){var e,f,g=new Router,i=a.location.hash.replace("#","");return b.addEventListener("hashchange",g.hashchange.bind(g),!1),g.active=void 0!==d.active?d.active===!0:!0,g.callback=d.callback||null,g.ctx=d.ctx&&"function"==typeof d.ctx.querySelectorAll?d.ctx:a.body,g.log=void 0!==d.log?d.log===!0:!1,g.select=g.ctx.querySelectorAll.bind(g.ctx),g.stop=void 0!==d.stop?d.stop===!0:!0,d.css&&(g.css={active:"active",hidden:"hidden"}),g.routes=[].slice.call(g.select("a")).filter(function(a){return c(a.href,"#")}).map(function(a){return a.href.replace(h,"")}),g["default"]=d["default"]||g.routes[0],g.css.hidden in g.ctx.classList||(""!==i&&c(g.routes,i)?(f=g.select("#"+i)[0],f&&f.classList.remove(g.css.hidden),g.css.active&&(e=g.select("a[href='#"+i+"']")[0],e&&e.classList.add(g.css.active))):g.route(g["default"])),g}var g,h=/.*\#/,i=(new Date).getTime();g=b.requestAnimationFrame||function(a){var b=(new Date).getTime()-i;setTimeout(function(){a(b)},16)},Router.prototype.constructor=Router,Router.prototype.current=function(){return this.history[0]},Router.prototype.hashchange=function(a){var b,d,f,i,j,k=c(a.oldURL,"#")?a.oldURL.replace(h,""):null,l=c(a.newURL,"#")?a.newURL.replace(h,""):null;this.active&&(k?c(this.routes,k):!0)&&(l?c(this.routes,l):!1)&&(b=k?this.select("#"+k)[0]:null,d=l?this.select("#"+l)[0]:null,f=k?this.select("a[href='#"+k+"']")[0]:null,i=l?this.select("a[href='#"+l+"']")[0]:null,j=e({element:d,hash:l}),this.stop===!0&&(a.preventDefault(),a.stopPropagation()),g(function(){f&&b&&(f.parentNode.classList.remove(this.css.active),b.classList.add(this.css.hidden)),i&&d?(i.parentNode.classList.add(this.css.active),d.classList.remove(this.css.hidden)):this["default"]&&this.route(this["default"]),this.log===!0&&this.history.unshift(j),null!==this.callback&&this.callback(j)}.bind(this)))},Router.prototype.route=function(b){return a.location.hash=b,this},"undefined"!=typeof exports?module.exports=f:"function"==typeof define?define(function(){return f}):b.router=f}(document,window);
//# sourceMappingURL=dom-router.min.js.map