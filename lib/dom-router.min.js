/*
 2014 Jason Mulligan
 @version 1.0.0
 */
!function(a,b){"use strict";function c(a,b){return a.indexOf(b)>-1}function d(a){this.hash=a.hash,this.element=a.element,this.trigger=a.trigger,this.timestamp=(new Date).toISOString()}function e(a){return new d(a)}function Router(){this.active=!0,this.callback=null,this.css=null,this.ctx=null,this["default"]=null,this.delimiter=null,this.history=[],this.log=!1,this.routes=[],this.select=null,this.stop=!0}function f(d){var e,f,g=new Router,i=a.location.hash.replace("#","");return"function"==typeof b.addEventListener?b.addEventListener("hashchange",g.hashchange.bind(g),!1):b.onhashchange=g.hashchange.bind(g),g.active=void 0!==d.active?d.active===!0:!0,g.callback=d.callback||null,g.css=d.css||{current:"current",hidden:"hidden"},g.ctx=d.ctx&&"function"==typeof d.ctx.querySelectorAll?d.ctx:a.body,g.delimiter=d.delimiter||"/",g.log=void 0!==d.log?d.log===!0:!1,g.select=g.ctx.querySelectorAll.bind(g.ctx),g.stop=void 0!==d.stop?d.stop===!0:!0,g.routes=[].slice.call(g.select("a")).filter(function(a){return c(a.href,"#")}).map(function(a){return a.href.replace(h,"")}),g["default"]=d["default"]||g.routes[0],g.css.hidden in g.ctx.classList||(""!==i&&c(g.routes,i)?(f=g.select("#"+i)[0],f&&f.classList.remove(g.css.hidden),g.css.current&&(e=g.select("a[href='#"+i+"']")[0],e&&e.classList.add(g.css.current))):g.route(g["default"])),g}var g,h=/.*\#/,i=(new Date).getTime();g=b.requestAnimationFrame||function(a){var b=(new Date).getTime()-i;setTimeout(function(){a(b)},16)},Router.prototype.constructor=Router,Router.prototype.current=function(){return this.history[0]},Router.prototype.hashchange=function(a){var b=c(a.oldURL,"#")?a.oldURL.replace(h,""):null,d=c(a.newURL,"#")?a.newURL.replace(h,""):null;this.active&&(b?c(this.routes,b):!0)&&(d?c(this.routes,d):!1)&&(this.stop===!0&&(a.preventDefault(),a.stopPropagation()),g(function(){var a,c,f,g=b.split(this.delimiter),h=d.split(this.delimiter);h.forEach(function(a,b){var d=b+1,e=g.length>=d,i=e?this.select("#"+g.slice(0,d).join(" > #"))[0]:null,j=e?this.select("a[href='#"+g.slice(0,d).join(this.delimiter)+"']")[0]:null;c=this.select("#"+h.slice(0,d).join(" > #"))[0],f=this.select("a[href='#"+h.slice(0,d).join(this.delimiter)+"']")[0],this.load(j||null,i||null,f||null,c||null)},this),a=e({element:c||null,hash:d,trigger:f||null}),this.log===!0&&this.history.unshift(a),null!==this.callback&&this.callback(a)}.bind(this)))},Router.prototype.load=function(a,b,c,d){return a&&b&&(this.css.current&&a.classList.remove(this.css.current),b.id!==d.id&&b.classList.add(this.css.hidden)),c&&d&&(this.css.current&&c.classList.add(this.css.current),d.classList.remove(this.css.hidden)),this},Router.prototype.route=function(b){return a.location.hash=b,this},"undefined"!=typeof exports?module.exports=f:"function"==typeof define?define(function(){return f}):b.router=f}(document,window);
//# sourceMappingURL=dom-router.min.js.map