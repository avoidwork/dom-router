/*
 2015 Jason Mulligan
 @version 1.1.0
 */
"use strict";var _prototypeProperties=function(a,b,c){b&&Object.defineProperties(a,b),c&&Object.defineProperties(a.prototype,c)};Array.from=Array.from||function(a){return[].slice.call(a)},function(a,b){var c=/.*\#/,d=(new Date).getTime(),e=function(a,b){return a.indexOf(b)>-1},f=b.requestAnimationFrame||function(a){var b=(new Date).getTime()-d;setTimeout(function(){a(b)},16)},g=function(a){this.hash=a.hash,this.element=a.element,this.trigger=a.trigger,this.timestamp=(new Date).toISOString()},h=function(a){return new g(a)},Router=function(){function Router(){this.active=!0,this.callback=function(){},this.css={current:"current",hidden:"hidden"},this.ctx=a.body,this["default"]=null,this.delimiter="/",this.history=[],this.logging=!1,this.routes=[],this.stop=!0}return _prototypeProperties(Router,null,{current:{value:function(){return this.history[0]},writable:!0,enumerable:!0,configurable:!0},hashchange:{value:function(a){var b=this,d=this,g=e(a.oldURL,"#")?a.oldURL.replace(c,""):null,i=e(a.newURL,"#")?a.newURL.replace(c,""):null;if(this.active){if(this.stop===!0&&"function"==typeof a.preventDefault&&(a.preventDefault(),a.stopPropagation()),!e(this.routes,i))return this.route(this.routes.filter(function(a){return e(a,i)})[0]||this["default"]);f(function(){var a=g?g.split(d.delimiter):[],c=i.split(d.delimiter),e=void 0,f=void 0;c.forEach(function(b,g){var h=g+1,i=a.length>=h,j=i?d.select("#"+a.slice(0,h).join(" > #"))[0]:null,k=i?d.select("a[href='#"+a.slice(0,h).join(d.delimiter)+"']")[0]:null;e=d.select("#"+c.slice(0,h).join(" > #"))[0],f=d.select("a[href='#"+c.slice(0,h).join(d.delimiter)+"']")[0],d.load(k||null,j||null,f||null,e||null)},b),d.css.current&&d.history.length>0&&d.history[0].trigger.classList.remove(d.css.current);var j=h({element:e||null,hash:i,trigger:f||null});d.log(j),d.callback(j)})}},writable:!0,enumerable:!0,configurable:!0},load:{value:function(a,b,c,d){return a&&this.css.current&&a.classList.remove(this.css.current),b&&b.id!==d.id&&b.classList.add(this.css.hidden),c&&this.css.current&&c.classList.add(this.css.current),d&&this.sweep(d,this.css.hidden),this},writable:!0,enumerable:!0,configurable:!0},log:{value:function(a){return this.logging&&this.history.unshift(a),this},writable:!0,enumerable:!0,configurable:!0},route:{value:function(b){return a.location.hash=b,this},writable:!0,enumerable:!0,configurable:!0},select:{value:function(a){return Array.from(this.ctx.querySelectorAll.call(this.ctx,a))},writable:!0,enumerable:!0,configurable:!0},scan:{value:function(a){return this.routes=this.select("a").filter(function(a){return e(a.href,"#")}).map(function(a){return a.href.replace(c,"")}),this["default"]=a||this.routes[0],this},writable:!0,enumerable:!0,configurable:!0},sweep:{value:function(a,b){return Array.from(a.parentNode.childNodes).filter(function(b){return 1===b.nodeType&&b.id&&b.id!==a.id}).forEach(function(a){a.classList.add(b)},this),a.classList.remove(b),this},writable:!0,enumerable:!0,configurable:!0}}),Router}(),i=function(c){var d=new Router,f=a.location.hash.replace("#",""),g=function(a){d.hashchange.call(d,a)};return"addEventListener"in b?b.addEventListener("hashchange",g,!1):b.onhashchange=g,c instanceof Object&&(d.active=void 0!==c.active?c.active===!0:d.active,d.callback=c.callback||d.callback,d.css=c.css||d.css,d.ctx=c.ctx&&"function"==typeof c.ctx.querySelectorAll?c.ctx:d.ctx,d.delimiter=c.delimiter||d.delimiter,d.logging=void 0!==c.logging?c.logging===!0:d.logging,d.stop=void 0!==c.stop?c.stop===!0:d.stop),d.scan(d["default"]),d.css.hidden in d.ctx.classList||(""!==f&&e(d.routes,f)?d.hashchange({oldURL:"",newURL:a.location.hash}):d.route(d["default"])),d};"undefined"!=typeof exports?module.exports=i:"function"==typeof define?define(function(){return i}):b.router=i}(document,window);
//# sourceMappingURL=dom-router.min.js.map