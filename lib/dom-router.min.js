/*
 2014 Jason Mulligan
 @version 1.0.0
 */
!function(a,b){"use strict";function c(a,b){return a.indexOf(b)>-1}function d(a){this.hash=a.hash,this.element=a.element}function e(a){return new d(a)}function Router(){this.active=null,this.callback=null,this.css={active:"active",hidden:"hidden"},this.ctx=null,this["default"]=null,this.history=[],this.log=!1,this.routes=[],this.selector=null,this.stop=!0}function f(d){var e=new Router,f=a.location.hash.replace("#","");return b.addEventListener("hashchange",e.hashchange,!1),e.active=void 0!==d.active?d.active===!0:!0,e.callback=d.callback||null,e.ctx=d.ctx||h("body")[0],e.log=void 0!==d.log?d.log===!0:!1,e.selector=d.selector||null,e.stop=void 0!==d.stop?d.stop===!0:!0,d.css&&(e.css={active:"active",hidden:"hidden"}),e.routes=h(e.ctx+" a").filter(function(a){return c(a.href,"#")}).map(function(a){return a.href.replace(i,"")}),e["default"]=d["default"]||e.routes[0],e.ctx.classList.hasClass(e.css.hidden)||(""!==f&&c(e.routes,f)?(h(e.ctx+" #"+f)[0].classList.remove(e.css.hidden),e.css.active&&h(e.ctx+" a[href='#"+f+"']")[0].classList.add(e.css.active)):e.route(e["default"])),e}var g,h=a.querySelectorAll.bind(a),i=/.*\#/,j=(new Date).getTime();g=b.requestAnimationFrame||function(a){var b=(new Date).getTime()-j;setTimeout(function(){a(b)},16)},Router.prototype.constructor=Router,Router.prototype.current=function(){return this.history[0]},Router.prototype.hashchange=function(a){var b,d,f,j,k,l=c(a.oldURL,"#")?a.oldURL.replace(i,""):null,m=c(a.newURL,"#")?a.newURL.replace(i,""):null;(l?c(this.routes,l):!0)&&(m?c(this.routes,m):!1)&&(b=l?h(this.ctx+" #"+l)[0]:null,d=m?h(this.ctx+" #"+m)[0]:null,f=l?h(this.ctx+" a[href='#"+l+"']")[0]:null,j=m?h(this.ctx+" a[href='#"+m+"']")[0]:null,k=e({element:d,hash:m}),this.stop===!0&&(a.preventDefault(),a.stopPropagation()),g(function(){f&&b&&(f.parentNode.classList.remove(this.css.active),b.classList.add(this.css.hidden)),j&&d?(j.parentNode.classList.add(this.css.active),d.classList.remove(this.css.hidden)):this["default"]&&this.route(this["default"]),this.log===!0&&this.history.unshift(k),null!==this.callback&&this.callback(k)}))},Router.prototype.route=function(b){return a.location.hash=b,this},"undefined"!=typeof exports?module.exports=f:"function"==typeof define?define(function(){return f}):b.router=f}(document,window);
//# sourceMappingURL=dom-router.min.js.map